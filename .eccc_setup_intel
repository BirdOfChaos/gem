#!/bin/bash

# For internal use at ECCC
# Source this file to:
# - Load profile, Intel compiler. and code-tools for Intel
# - Load libraries
# - Load a script for common setup to all compilers

export COMPILER_SUITE=intel
export COMPILER_VERSION=2021.5.0
DOMAIN=`hostname -d`

if [[ ${DOMAIN} = "collab.science.gc.ca" ]]; then
    . r.load.dot rpn/code-tools/ENV/cdt-1.6.0/SCIENCE/gpscc2/inteloneapi-2022.1.2
elif  [[ -z "${DOMAIN}" || ${DOMAIN} = "science.gc.ca" ]]; then
    . r.load.dot rpn/code-tools/ENV/cdt-1.6.0/SCIENCE/inteloneapi-2022.1.2
else
    . r.load.dot rpn/code-tools/ENV/cdt-1.6.0/ECCC/inteloneapi-2022.1.2
fi
# Load latest version of RPN-SI libraries
. r.load.dot rpn/libs/20221125-alpha

# We need a more recent version of cmake than the one available by default
. ssmuse-sh -d main/opt/cmake/cmake-3.21.1

. ./.common_setup ${COMPILER_SUITE}
